# Technical Debt: TD-002 - 残存Lintエラーの管理

## 概要
- **ID**: TD-002
- **タイプ**: コード品質（低影響度）
- **優先度**: 低（P3）
- **作成日**: 2025-01-22
- **最終更新**: 2025-01-22
- **ステータス**: 📋 未着手
- **前提条件**: TD-001完了（コアロジックのany型ゼロ化達成）

## エグゼクティブサマリー
TD-001で74%のエラー削減とコアロジックの完全型安全化を達成後、残存する87件の低影響度エラーを管理。
これらは製品品質に直接的な影響を与えないため、リソースに余裕がある時期に対応する。

## 問題の説明
TD-001の完了後、以下のカテゴリーのエラーが残存：
1. テストファイル内のany型（製品コードへの影響なし）
2. インターフェース実装に必要な未使用パラメータ（仕様上必須）
3. その他の低影響度警告

## 現在の状態

### エラー統計
```
総エラー数: 87件
カテゴリー別内訳:
- @typescript-eslint/no-explicit-any: 5件
- @typescript-eslint/no-unused-vars: 72件
- その他: 10件
```

### エラー詳細

#### 1. any型エラー（5件）- テストファイルのみ
| ファイル | 件数 | 影響度 | 備考 |
|---------|------|--------|------|
| src/game/systems/__tests__/*.test.ts | 3 | なし | モックオブジェクト |
| src/hooks/__tests__/*.test.tsx | 2 | なし | テスト用フィクスチャ |

#### 2. 未使用変数エラー（72件）- 大半は設計上必須
| カテゴリー | 件数 | 対応方針 |
|-----------|------|---------|
| インターフェース実装の必須パラメータ | 45 | アンダースコア接頭辞で維持 |
| イベントハンドラーの未使用引数 | 15 | アンダースコア接頭辞で維持 |
| 将来使用予定のインポート | 7 | 実装時まで保留 |
| 真に不要な変数 | 5 | 削除可能 |

#### 3. その他のエラー（10件）
| エラータイプ | 件数 | 影響度 | 対応方針 |
|------------|------|--------|---------|
| @typescript-eslint/ban-ts-comment | 4 | 低 | 正当な使用の確認 |
| @typescript-eslint/no-unsafe-function-type | 3 | 低 | 型定義の改善 |
| その他の警告 | 3 | 低 | 個別評価 |

### ファイル分布
```
src/game/systems/__tests__: 25件
src/hooks/__tests__: 15件
src/game/entities: 10件
src/game/rendering: 8件
src/game/plugins: 7件
src/components: 22件
```

## 対応方針

### 推奨アプローチ
1. **対応不要（62件）**: インターフェース実装の必須パラメータ
2. **低優先度対応（20件）**: テストファイルのany型とその他警告
3. **即座に対応可能（5件）**: 真に不要な変数の削除

### 実施タイミング
- **即座**: 真に不要な変数5件のみ
- **次回リファクタリング時**: テストファイルのany型
- **保留**: インターフェース実装の必須パラメータ

## リスクと影響

### リスク評価
- **ビジネスリスク**: なし（製品コードは既に型安全）
- **技術リスク**: 極小（テストコードと警告レベルのみ）
- **保守性リスク**: 低（既に大幅改善済み）

### 影響分析
- **パフォーマンス**: 影響なし
- **型安全性**: 既に確保済み（TD-001で達成）
- **開発効率**: 現状で問題なし

## アクションプラン

### Phase 1: 即座対応可能項目（推定工数: 0.5時間）
- [ ] 真に不要な変数5件の削除
- [ ] ビルド確認

### Phase 2: 低優先度項目（推定工数: 2時間）
- [ ] テストファイルのany型改善（必要に応じて）
- [ ] その他警告の個別評価

### Phase 3: 設計見直し（推定工数: 検討のみ）
- [ ] インターフェース設計の再評価（大規模リファクタリング時）
- [ ] ESLint設定の調整検討

## 完了基準
- [ ] 真に不要な変数の削除（5件）
- [ ] ドキュメント更新
- [ ] チーム合意（これ以上の対応は不要との判断）

## 推奨事項

### ESLint設定の調整案
```javascript
// .eslintrc.cjs
{
  "rules": {
    // インターフェース実装の必須パラメータを許可
    "@typescript-eslint/no-unused-vars": [
      "error",
      {
        "argsIgnorePattern": "^_",
        "varsIgnorePattern": "^_"
      }
    ]
  }
}
```

### 長期的な改善案
1. **インターフェース分離の原則**適用
2. **オプショナルパラメータ**の活用
3. **型定義の共通化**による保守性向上

## 参照
- 前提: `docs/technical-debt/TD-001-lint-cleanup.md`
- ESLint設定: `.eslintrc.cjs`
- 型定義: `src/types/`

## 備考
- TD-001で主要な問題は解決済み
- 残存エラーは「生きているコード」の証拠
- 過度な「ゼロエラー」追求は逆に保守性を損なう可能性あり
- チームの判断で「Won't Fix」とすることも妥当

## 決定事項
このTD-002は情報提供と管理目的で作成。
アクティブな対応は不要と判断し、参照用ドキュメントとして保管。